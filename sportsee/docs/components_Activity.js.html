<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/Activity.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/Activity.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import getData from "../services/GetData";
import "../style/Activity.css";
import mockData from "../services/MockData";
import { useState, useEffect } from "react";
import {
	BarChart,
	Bar,
	XAxis,
	YAxis,
	CartesianGrid,
	Tooltip,
	Legend,
	ResponsiveContainer,
} from "recharts";

import CustomTooltip from "./CustomTooltip";

/**
 *
 * @param {int} props.id - id de l'utilisateur
 * @returns the activity chart
 */

function Activity(props) {
	const [data, setData] = useState(null);
	let calories = [];
	let kilograms = [];
	const [minCal, setMinCal] = useState(0);
	const [maxCal, setMaxCal] = useState(0);
	const [minKg, setMinKg] = useState(0);
	const [maxKg, setMaxKg] = useState(0);
	const filtered = mockData.USER_ACTIVITY.filter(
		(item) => item.userId == props.id
	);

	// data recuperation
	useEffect(() => {
		getData(props.id, "activity")
			.then((res) => {
				if (res.status === 200) {
					setData(res.data.data.sessions);
				}
			})
			.catch((err) => {
				setData(filtered[0].sessions);
				console.log(err);
			});
	}, []);

	// setting the min and max values for the calories and kilograms to display the graph
	useEffect(() => {
		if (data) {
			data.forEach((session) => {
				calories.push(session.calories);
				kilograms.push(session.kilogram);
			});
			setMinCal(Math.min(...calories));
			setMaxCal(Math.max(...calories));
			setMinKg(Math.min(...kilograms));
			setMaxKg(Math.max(...kilograms));
		}
	}, [data]);

	// render
	return (
		&lt;div className="activity">
			&lt;div className="activity-header">
				&lt;h2 className="activity-title">Activité quotidienne&lt;/h2>
				&lt;ul className="activity-legend">
					&lt;li className="activity-legend-item">Poids (kg)&lt;/li>
					&lt;li className="activity-legend-item item-red">
						Calories brûlées(kCal)
					&lt;/li>
				&lt;/ul>
			&lt;/div>
			&lt;div className="activity-content">
				&lt;ResponsiveContainer
					width="100%"
					height="100%"
					aspect={3.5}
					className="activity-graph-container"
				>
					&lt;BarChart
						className="activity-graph"
						width={500}
						height={300}
						barGap={8}
						barSize={7}
						data={data}
						margin={{
							top: 5,
							right: 30,
							left: 20,
							bottom: 5,
						}}
					>
						&lt;CartesianGrid strokeDasharray="3 3" vertical={false} />
						&lt;XAxis axisLine={false} tickLine={false} dataKey="day" />
						&lt;YAxis
							dataKey="kilogram"
							yAxisId="kilogramAxis"
							interval={"preserveEnd"}
							orientation="right"
							tickLine={false}
							axisLine={false}
							tickCount={4}
							domain={[minKg - 1, maxKg + 1]}
						/>
						&lt;YAxis
							dataKey="calories"
							yAxisId="caloriesAxis"
							orientation="right"
							hide={true}
							domain={[minCal * 0.7, maxCal * 1.1]}
						/>
						&lt;Tooltip content={&lt;CustomTooltip />} />
						&lt;Legend />
						&lt;Bar
							dataKey="kilogram"
							yAxisId="kilogramAxis"
							radius={[50, 50, 0, 0]}
							fill="#282D30"
						/>
						&lt;Bar
							dataKey="calories"
							yAxisId="caloriesAxis"
							radius={[50, 50, 0, 0]}
							fill="#E60000"
						/>
					&lt;/BarChart>
				&lt;/ResponsiveContainer>
			&lt;/div>
		&lt;/div>
	);
}

export default Activity;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Activity">Activity</a></li><li><a href="global.html#ActivityRadar">ActivityRadar</a></li><li><a href="global.html#AverageSession">AverageSession</a></li><li><a href="global.html#CustomTooltip">CustomTooltip</a></li><li><a href="global.html#DashboardUi">DashboardUi</a></li><li><a href="global.html#Score">Score</a></li><li><a href="global.html#UserInfos">UserInfos</a></li><li><a href="global.html#UserInfosItem">UserInfosItem</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Fri Aug 19 2022 23:24:27 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
